!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("MaterialUI"),require("React"),require("axios")):"function"==typeof define&&define.amd?define(["MaterialUI","React","axios"],t):"object"==typeof exports?exports.KubeStellarClusterPlugin=t(require("MaterialUI"),require("React"),require("axios")):e.KubeStellarClusterPlugin=t(e.MaterialUI,e.React,e.axios)}(this,((e,t,r)=>(()=>{"use strict";var n={627:t=>{t.exports=e},742:e=>{e.exports=r},883:e=>{e.exports=t}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return n[e](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};o.r(u),o.d(u,{DetachForm:()=>v,OnboardForm:()=>m});var l=o(627),c=o(883),i=o.n(c),s=o(742),f=o.n(s),p=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function u(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,l)}c((n=n.apply(e,t||[])).next())}))},d=function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=l(0),u.throw=l(1),u.return=l(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},b=function(){var e=(0,c.useState)(!1),t=e[0],r=e[1];return{onboardCluster:function(e){return p(void 0,void 0,void 0,(function(){var t,n;return d(this,(function(a){switch(a.label){case 0:r(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f().post("/api/plugins/kubestellar-cluster-plugin/onboard",e)];case 2:return t=a.sent(),r(!1),[2,t.data];case 3:throw n=a.sent(),r(!1),n;case 4:return[2]}}))}))},detachCluster:function(e){return p(void 0,void 0,void 0,(function(){var t,n;return d(this,(function(a){switch(a.label){case 0:r(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f().post("/api/plugins/kubestellar-cluster-plugin/detach",{clusterName:e})];case 2:return t=a.sent(),r(!1),[2,t.data];case 3:throw n=a.sent(),r(!1),n;case 4:return[2]}}))}))},getClusterStatus:function(){return p(void 0,void 0,void 0,(function(){var e,t;return d(this,(function(n){switch(n.label){case 0:r(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f().get("/api/plugins/kubestellar-cluster-plugin/status")];case 2:return e=n.sent(),r(!1),[2,e.data.clusters||[]];case 3:throw t=n.sent(),r(!1),t;case 4:return[2]}}))}))},loading:t}},h=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function u(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,l)}c((n=n.apply(e,t||[])).next())}))},y=function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=l(0),u.throw=l(1),u.return=l(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},v=function(){var e=(0,c.useState)(""),t=e[0],r=e[1],n=(0,c.useState)([]),a=n[0],o=n[1],u=(0,c.useState)(""),s=u[0],f=u[1],p=(0,c.useState)(""),d=p[0],v=p[1],m=b(),g=m.detachCluster,x=m.getClusterStatus,w=m.loading;return(0,c.useEffect)((function(){h(void 0,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,x()];case 1:return e=t.sent(),o(e),[3,3];case 2:return t.sent(),f("Failed to fetch cluster list"),[3,3];case 3:return[2]}}))}))}),[x]),i().createElement(l.Box,{component:"form",onSubmit:function(e){return h(void 0,void 0,void 0,(function(){var n,a;return y(this,(function(u){switch(u.label){case 0:if(e.preventDefault(),f(""),v(""),!t)return f("Cluster name is required"),[2];u.label=1;case 1:return u.trys.push([1,6,,7]),[4,g(t)];case 2:return(n=u.sent()).success?(v(n.message||"Cluster detached successfully"),r(""),[4,x()]):[3,4];case 3:return a=u.sent(),o(a),[3,5];case 4:f(n.message||"Failed to detach cluster"),u.label=5;case 5:return[3,7];case 6:return u.sent(),f("An error occurred while detaching the cluster"),[3,7];case 7:return[2]}}))}))},sx:{maxWidth:600,mx:"auto",p:2}},i().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Detach Cluster"),s&&i().createElement(l.Alert,{severity:"error",sx:{mb:2}},s),d&&i().createElement(l.Alert,{severity:"success",sx:{mb:2}},d),i().createElement(l.Select,{label:"Select Cluster",value:t,onChange:function(e){return r(e.target.value)},fullWidth:!0,margin:"none",displayEmpty:!0,renderValue:function(e){return e||i().createElement("em",null,"Select a cluster to detach")}},i().createElement(l.MenuItem,{disabled:!0,value:""},i().createElement("em",null,"Select a cluster to detach")),a.map((function(e){return i().createElement(l.MenuItem,{key:e.name,value:e.name},e.name," (",e.status,")")}))),i().createElement(l.Button,{type:"submit",variant:"contained",color:"secondary",fullWidth:!0,disabled:w||!t,sx:{mt:2}},w?"Detaching...":"Detach Cluster"))},m=function(){var e=(0,c.useState)(""),t=e[0],r=e[1],n=(0,c.useState)(""),a=n[0],o=n[1],u=(0,c.useState)(""),s=u[0],f=u[1],p=(0,c.useState)(""),d=p[0],h=p[1],y=b(),v=y.onboardCluster,m=y.loading;return i().createElement(l.Box,{component:"form",onSubmit:function(e){return n=void 0,u=void 0,c=function(){var n;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=l(0),u.throw=l(1),u.return=l(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(u){switch(u.label){case 0:if(e.preventDefault(),f(""),h(""),!a)return f("Kubeconfig is required"),[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,v({clusterName:t,kubeconfig:a})];case 2:return(n=u.sent()).success?(h(n.message||"Cluster onboarded successfully"),r(""),o("")):f(n.message||"Failed to onboard cluster"),[3,4];case 3:return u.sent(),f("An error occurred while onboarding the cluster"),[3,4];case 4:return[2]}}))},new((l=void 0)||(l=Promise))((function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function a(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof l?n:new l((function(e){e(n)}))).then(r,a)}o((c=c.apply(n,u||[])).next())}));var n,u,l,c},sx:{maxWidth:600,mx:"auto",p:2}},i().createElement(l.Typography,{variant:"h6",gutterBottom:!0},"Onboard New Cluster"),s&&i().createElement(l.Alert,{severity:"error",sx:{mb:2}},s),d&&i().createElement(l.Alert,{severity:"success",sx:{mb:2}},d),i().createElement(l.TextField,{label:"Cluster Name (Optional)",value:t,onChange:function(e){return r(e.target.value)},fullWidth:!0,margin:"normal"}),i().createElement(l.TextField,{label:"Kubeconfig (Base64 Encoded)",value:a,onChange:function(e){return o(e.target.value)},fullWidth:!0,multiline:!0,rows:4,margin:"normal",required:!0}),i().createElement(l.Button,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:m,sx:{mt:2}},m?"Onboarding...":"Onboard Cluster"))};return u})()));